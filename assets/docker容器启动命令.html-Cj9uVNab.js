import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as r,a as s,b as a,d as l,e}from"./app-hoN0JGLf.js";const c={},t=e(`<h1 id="docker容器启动命令" tabindex="-1"><a class="header-anchor" href="#docker容器启动命令"><span>docker容器启动命令</span></a></h1><h2 id="rabbitmq" tabindex="-1"><a class="header-anchor" href="#rabbitmq"><span>rabbitmq</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> rabbit</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 5672:5672</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 15762:15672</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> RABBITMQ_DEFAULT_USER=admin</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> RABBITMQ_DEFAULT_PASS=</span><span style="color:#098658;">123456</span><span style="color:#A31515;"> arm64v8/rabbitmq:3-management</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="kafka" tabindex="-1"><a class="header-anchor" href="#kafka"><span>kafka</span></a></h2>`,4),d={href:"https://blog.csdn.net/y393016244/article/details/126405864",target:"_blank",rel:"noopener noreferrer"},v={href:"https://blog.csdn.net/weixin_39766667/article/details/128177436",target:"_blank",rel:"noopener noreferrer"},y={href:"https://blog.csdn.net/succing/article/details/127353800",target:"_blank",rel:"noopener noreferrer"},u=e(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> zookeeper-server</span><span style="color:#0000FF;"> --network</span><span style="color:#A31515;"> app-tier</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> ALLOW_ANONYMOUS_LOGIN=yes</span><span style="color:#A31515;"> bitnami/zookeeper:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;"># KAFKA_ADVERTISED_HOST_NAME当前主机IP或地址</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> kafka-server</span><span style="color:#0000FF;"> --network</span><span style="color:#A31515;"> app-tier</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9092:9092</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> ALLOW_PLAINTEXT_LISTENER=yes</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#000000;">-e </span><span style="color:#A31515;">KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper-server:2181</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#000000;">-e </span><span style="color:#A31515;">KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://10.138.108.127:9092</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#000000;">bitnami/kafka:latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> kafka-map</span><span style="color:#0000FF;">  --network</span><span style="color:#A31515;"> app-tier</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9001:8080</span><span style="color:#0000FF;">  -e</span><span style="color:#A31515;"> DEFAULT_USERNAME=admin</span><span style="color:#0000FF;">  -e</span><span style="color:#A31515;"> DEFAULT_PASSWORD=admin</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#000000;">--restart </span><span style="color:#A31515;">always</span><span style="color:#A31515;"> dushixiang/kafka-map:latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gitlab" tabindex="-1"><a class="header-anchor" href="#gitlab"><span>gitlab</span></a></h2>`,2),m={href:"https://docs.gitlab.cn/jh/install/docker.html",target:"_blank",rel:"noopener noreferrer"},b={href:"https://blog.csdn.net/qq_36719391/article/details/123816629",target:"_blank",rel:"noopener noreferrer"},F={href:"https://blog.csdn.net/Choerodon/article/details/97751754",target:"_blank",rel:"noopener noreferrer"},h=e(`<blockquote><p>密码 wanhongji/whj123456</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;"># 查看root初始密码</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> exec</span><span style="color:#0000FF;"> -it</span><span style="color:#A31515;"> 容器名字或容器ID</span><span style="color:#A31515;"> grep</span><span style="color:#A31515;"> &#39;Password:&#39;</span><span style="color:#A31515;"> /etc/gitlab/initial_root_password</span></span>
<span class="line"><span style="color:#008000;"># linux</span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> GITLAB_HOME</span><span style="color:#000000;">=/</span><span style="color:#001080;">srv</span><span style="color:#000000;">/</span><span style="color:#001080;">gitlab</span><span style="color:#000000;"> </span></span>
<span class="line"><span style="color:#008000;"># mac </span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> GITLAB_HOME</span><span style="color:#000000;">=</span><span style="color:#001080;">$HOME</span><span style="color:#000000;">/</span><span style="color:#001080;">gitlab</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;"># 社区</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --detach</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --publish</span><span style="color:#A31515;"> 443:443</span><span style="color:#0000FF;"> --publish</span><span style="color:#A31515;"> 8087:80</span><span style="color:#0000FF;"> --publish</span><span style="color:#A31515;"> 22:22</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --name</span><span style="color:#A31515;"> gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --restart</span><span style="color:#A31515;"> always</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/config:/etc/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/logs:/var/log/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/data:/var/opt/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --shm-size</span><span style="color:#A31515;"> 256m</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#A31515;">  gitlab/gitlab-ce:latest</span></span>
<span class="line"><span style="color:#008000;"># 官方</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --detach</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --publish</span><span style="color:#A31515;"> 443:443</span><span style="color:#0000FF;"> --publish</span><span style="color:#A31515;"> 80:80</span><span style="color:#0000FF;"> --publish</span><span style="color:#A31515;"> 22:22</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --name</span><span style="color:#A31515;"> gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --restart</span><span style="color:#A31515;"> always</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/config:/etc/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/logs:/var/log/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --volume</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/data:/var/opt/gitlab</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  --shm-size</span><span style="color:#A31515;"> 256m</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#A31515;">  registry.gitlab.cn/omnibus/gitlab-jh:latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gitlab-runner" tabindex="-1"><a class="header-anchor" href="#gitlab-runner"><span>gitlab runner</span></a></h3><blockquote><p>嵌套逻辑</p></blockquote><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>非容器安装runner，可直接使用docker.sock,安装容器</span></span>
<span class="line"><span></span></span>
<span class="line"><span>容器安装需挂载进来docker.sock，安装启用容器（容器内部又要使用docker.sock,挂载进，不挂载就需安装docker in docker）</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),k={href:"https://blog.csdn.net/u011933777/article/details/107561090",target:"_blank",rel:"noopener noreferrer"},A={href:"https://www.cnblogs.com/xxred/p/11548254.html",target:"_blank",rel:"noopener noreferrer"},g={href:"https://docs.gitlab.com/ee/ci/docker/using_docker_build.html",target:"_blank",rel:"noopener noreferrer"},_={href:"https://blog.csdn.net/windy135/article/details/103885052",target:"_blank",rel:"noopener noreferrer"},E={href:"https://blog.csdn.net/clover661/article/details/123330947",target:"_blank",rel:"noopener noreferrer"},q=e(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> gitlab-runner</span><span style="color:#0000FF;"> --restart</span><span style="color:#A31515;"> always</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  -v</span><span style="color:#A31515;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#0000FF;">  -v</span><span style="color:#001080;"> $GITLAB_HOME</span><span style="color:#A31515;">/gitlab-runner/config:/etc/gitlab-runner</span><span style="color:#EE0000;"> \\</span></span>
<span class="line"><span style="color:#A31515;">  gitlab/gitlab-runner:latest</span></span>
<span class="line"><span style="color:#000000;">  </span></span>
<span class="line"><span style="color:#008000;"># 注册 </span></span>
<span class="line"><span style="color:#008000;"># 注册时配置默认镜像，可在yml文件配置新的镜像</span></span>
<span class="line"><span style="color:#795E26;">sudo</span><span style="color:#A31515;"> docker</span><span style="color:#A31515;"> exec</span><span style="color:#0000FF;"> -it</span><span style="color:#A31515;"> gitlab-runner</span><span style="color:#A31515;"> gitlab-ci-multi-runner</span><span style="color:#A31515;"> register</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="harbor" tabindex="-1"><a class="header-anchor" href="#harbor"><span>harbor</span></a></h2>`,2),x={href:"https://www.cnblogs.com/andyxie/p/16531567.html",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/goharbor/harbor/releases",target:"_blank",rel:"noopener noreferrer"},j=e(`<blockquote><p>密码 Harbor12345</p></blockquote><p>使用超级管理员执行sudo</p><p>推送时需登录 docker login -u root -p passwd 地址</p><blockquote><p>步骤</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">tar</span><span style="color:#0000FF;"> -zxvf</span><span style="color:#A31515;">  harbor-offline-installer-v2.5.1.tgz</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">cp</span><span style="color:#A31515;"> harbor.yml.tmpl</span><span style="color:#A31515;"> harbor.yml</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;"># 更改hostname 注释掉https 要不然安装报错 修改文件位置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">sudo</span><span style="color:#A31515;"> ./install.sh</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>docker 配置</p></blockquote><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#000000;">{</span></span>
<span class="line"><span style="color:#0451A5;">  &quot;insecure-registries&quot;</span><span style="color:#000000;">: [</span></span>
<span class="line"><span style="color:#A31515;">    &quot;192.168.3.88:8089&quot;</span></span>
<span class="line"><span style="color:#000000;">  ]</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jenkins" tabindex="-1"><a class="header-anchor" href="#jenkins"><span>jenkins</span></a></h2>`,8),T={href:"https://www.reinforce.cn/t/658.html",target:"_blank",rel:"noopener noreferrer"},S=e(`<blockquote><p>配置git</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;"># 进入容器执行</span></span>
<span class="line"><span style="color:#795E26;">ssh-keygen</span><span style="color:#0000FF;"> -t</span><span style="color:#A31515;"> rsa</span><span style="color:#0000FF;"> -C</span><span style="color:#A31515;"> &quot;git邮箱&quot;</span></span>
<span class="line"><span style="color:#008000;"># -t 使用的算法</span></span>
<span class="line"><span style="color:#008000;"># -C commit记录，标识</span></span>
<span class="line"><span style="color:#008000;"># 配置GitHub公钥</span></span>
<span class="line"><span style="color:#008000;"># 配置jenkins凭据，设置用户名（设置邮箱名）和私钥</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">## 配置主机密钥</span></span>
<span class="line"><span style="color:#795E26;">ssh-keyscan</span><span style="color:#0000FF;"> -H</span><span style="color:#000000;"> &lt;</span><span style="color:#A31515;">Githup服务器i</span><span style="color:#000000;">p&gt; &gt;&gt; </span><span style="color:#A31515;">/var/jenkins_home/.ssh/known_hosts</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>maven、gradle配置</p></blockquote><ul><li>可通过挂载宿主机maven或gradle的目录到jenkins,在jenkins配置maven、gradle</li><li>可使用 .gradlew clean bootJar 来构建，即gradle的包装，可自动下载gradle,jenkins中有权限问题，暂未解决</li><li>也可直接配置自动安装,在使用时手动设置环境变量，而不是使用tools处理</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;">#!/bin/bash</span></span>
<span class="line"><span style="color:#001080;">PATH</span><span style="color:#000000;">=</span><span style="color:#A31515;">/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin</span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> JAVA_HOME</span><span style="color:#000000;">=/</span><span style="color:#001080;">var</span><span style="color:#000000;">/</span><span style="color:#001080;">jenkins_home</span><span style="color:#000000;">/</span><span style="color:#001080;">tools</span><span style="color:#000000;">/</span><span style="color:#001080;">hudson</span><span style="color:#000000;">.</span><span style="color:#001080;">model</span><span style="color:#000000;">.</span><span style="color:#001080;">JDK</span><span style="color:#000000;">/</span><span style="color:#001080;">jdk8</span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> PATH</span><span style="color:#000000;">=</span><span style="color:#001080;">$JAVA_HOME</span><span style="color:#000000;">/</span><span style="color:#001080;">bin</span><span style="color:#000000;">:</span><span style="color:#001080;">$PATH</span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> MAVEN_HOME</span><span style="color:#000000;">=/</span><span style="color:#001080;">var</span><span style="color:#000000;">/</span><span style="color:#001080;">jenkins_home</span><span style="color:#000000;">/</span><span style="color:#001080;">tools</span><span style="color:#000000;">/</span><span style="color:#001080;">hudson</span><span style="color:#000000;">.</span><span style="color:#001080;">tasks</span><span style="color:#000000;">.</span><span style="color:#001080;">Maven_MavenInstallation</span><span style="color:#000000;">/</span><span style="color:#001080;">maven</span></span>
<span class="line"><span style="color:#0000FF;">export</span><span style="color:#001080;"> PATH</span><span style="color:#000000;">=</span><span style="color:#001080;">$MAVEN_HOME</span><span style="color:#000000;">/</span><span style="color:#001080;">bin</span><span style="color:#000000;">:</span><span style="color:#001080;">$PATH</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>时区问题</p></blockquote><p>scriptConsole加以下脚本 System.setProperty(&#39;org.apache.commons.jelly.tags.fmt.timeZone&#39;, &#39;Asia/Shanghai&#39;)</p><blockquote><p>docker in docker问题</p></blockquote><ul><li>和宿主机共用docker</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>-v /var/run/docker.sock:/var/run/docker.sock 和宿主公用一个docker的方式启动</span></span>
<span class="line"><span></span></span>
<span class="line"><span>chmod 777 /var/run/docker.sock 将权限赋给所有用户</span></span>
<span class="line"><span></span></span>
<span class="line"><span>在jenkins单节点上映射宿主机的docker.sock和客户端命令  </span></span>
<span class="line"><span>-v /var/run/docker.sock:/var/run/docker.sock \\</span></span>
<span class="line"><span>-v /usr/local/bin/docker:/usr/bin/docker \\</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>docker run -d \\</span></span>
<span class="line"><span>-u root \\</span></span>
<span class="line"><span>--name jenkins \\</span></span>
<span class="line"><span>--privileged=true \\</span></span>
<span class="line"><span>--restart=always \\</span></span>
<span class="line"><span>-p 8080:8080 \\</span></span>
<span class="line"><span>-p 50000:50000 \\</span></span>
<span class="line"><span>-v jenkins-data:/var/jenkins_home \\</span></span>
<span class="line"><span>-v /var/run/docker.sock:/var/run/docker.sock \\</span></span>
<span class="line"><span>-v /usr/local/bin/docker:/usr/bin/docker \\</span></span>
<span class="line"><span>jenkins/jenkins:lts-jdk11</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>docker run \\</span></span>
<span class="line"><span>  -u root \\</span></span>
<span class="line"><span>  --rm \\</span></span>
<span class="line"><span>  -d \\</span></span>
<span class="line"><span>  -p 8080:8080 \\</span></span>
<span class="line"><span>  -p 50000:50000 \\</span></span>
<span class="line"><span>  --name jenkins \\</span></span>
<span class="line"><span>  -v jenkins-data:/var/jenkins_home:rw \\</span></span>
<span class="line"><span>  -v /var/run/docker.sock:/var/run/docker.sock:rw \\</span></span>
<span class="line"><span>  -v /usr/local/bin/docker:/usr/bin/docker:rw \\</span></span>
<span class="line"><span>  jenkins/jenkins:lts-jdk11</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>docker run \\</span></span>
<span class="line"><span>  -u root \\</span></span>
<span class="line"><span>  -d \\</span></span>
<span class="line"><span>  -p 8080:8080 \\</span></span>
<span class="line"><span>  -p 50000:50000 \\</span></span>
<span class="line"><span>  --name jenkins \\</span></span>
<span class="line"><span>  -v jenkins-data:/var/jenkins_home:rw \\</span></span>
<span class="line"><span>  -v /var/run/docker.sock:/var/run/docker.sock:rw \\</span></span>
<span class="line"><span>  -v /usr/bin/docker:/usr/bin/docker:rw \\</span></span>
<span class="line"><span>  jenkins/jenkins:jdk11</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>/usr/local/bin/docker</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-v /var/run/docker.sock:/var/run/docker.sock \\</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>使用docker dind</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>docker run --name jenkins-docker --rm --detach \\</span></span>
<span class="line"><span>  --privileged --network jenkins --network-alias docker \\</span></span>
<span class="line"><span>  --env DOCKER_TLS_CERTDIR=/certs \\</span></span>
<span class="line"><span>  --volume jenkins-docker-certs:/certs/client \\</span></span>
<span class="line"><span>  --volume jenkins-data:/var/jenkins_home \\</span></span>
<span class="line"><span>  --publish 3000:3000 --publish 2376:2376 \\</span></span>
<span class="line"><span>  docker:dind --storage-driver overlay2</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    //Dockerfile</span></span>
<span class="line"><span>    FROM jenkins/jenkins:lts-jdk11</span></span>
<span class="line"><span>    USER root</span></span>
<span class="line"><span>    RUN apt-get update &amp;&amp; apt-get install -y lsb-release</span></span>
<span class="line"><span>    RUN curl -fsSLo /usr/share/keyrings/docker-archive-keyring.asc \\</span></span>
<span class="line"><span>      https://download.docker.com/linux/debian/gpg</span></span>
<span class="line"><span>    RUN echo &quot;deb [arch=$(dpkg --print-architecture) \\</span></span>
<span class="line"><span>      signed-by=/usr/share/keyrings/docker-archive-keyring.asc] \\</span></span>
<span class="line"><span>      https://download.docker.com/linux/debian \\</span></span>
<span class="line"><span>      $(lsb_release -cs) stable&quot; &gt; /etc/apt/sources.list.d/docker.list</span></span>
<span class="line"><span>    RUN apt-get update &amp;&amp; apt-get install -y docker-ce-cli</span></span>
<span class="line"><span>    USER jenkins</span></span>
<span class="line"><span>    RUN jenkins-plugin-cli --plugins &quot;blueocean:1.25.6 docker-workflow:1.29&quot;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    //构建自定义镜像</span></span>
<span class="line"><span>    docker build -t myjenkins-blueocean:lts .</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>    --volume &quot;$HOME&quot;:/home \\</span></span>
<span class="line"><span>    --env JAVA_OPTS=&quot;-Dhudson.plugins.git.GitSCM.ALLOW_LOCAL_CHECKOUT=true&quot; \\</span></span>
<span class="line"><span>    --restart=on-failure \\</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>  docker run --name jenkins --detach \\</span></span>
<span class="line"><span>  --network jenkins --env DOCKER_HOST=tcp://docker:2376 \\</span></span>
<span class="line"><span>  --env DOCKER_CERT_PATH=/certs/client --env DOCKER_TLS_VERIFY=1 \\</span></span>
<span class="line"><span>  --publish 8080:8080 --publish 50000:50000 \\</span></span>
<span class="line"><span>  --volume jenkins-data:/var/jenkins_home \\</span></span>
<span class="line"><span>  --volume jenkins-docker-certs:/certs/client:ro \\</span></span>
<span class="line"><span>  --volume &quot;$HOME&quot;:/home \\</span></span>
<span class="line"><span>  --env JAVA_OPTS=&quot;-Dhudson.plugins.git.GitSCM.ALLOW_LOCAL_CHECKOUT=true&quot; \\</span></span>
<span class="line"><span>  --restart=on-failure \\</span></span>
<span class="line"><span>  jenkins/jenkins:lts-jdk11</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span>  // mac</span></span>
<span class="line"><span>  docker run --name jenkins-docker --rm -d --privileged --network jenkins --network-alias docker -e DOCKER_TLS_CERTDIR=/certs -v /Users/wanhongji/data/jenkins-docker-certs:/certs/client -v /Users/wanhongji/data/jenkins_home:/var/jenkins_home  -p 2376:2376 docker:dind --storage-driver overlay2</span></span>
<span class="line"><span>  docker run --name jenkins -d --network jenkins -e DOCKER_HOST=tcp://docker:2376  -e DOCKER_CERT_PATH=/certs/client -e DOCKER_TLS_VERIFY=1 -v /Users/wanhongji/data/jenkins_home:/var/jenkins_home -v /Users/wanhongji/data/jenkins-docker-certs:/certs/client:ro -p 8080:8080 -p 50000:50000 jenkins/jenkins:lts-jdk11</span></span>
<span class="line"><span>  </span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --rm</span><span style="color:#0000FF;"> -u</span><span style="color:#A31515;"> root</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8080:8080</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> jenkins</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/jenkins-data:/var/jenkins_home</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /usr/bin/docker:/usr/bin/docker</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="color:#A31515;">  jenkinsci/blueocean</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">## mac</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> jenkins</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /Users/wanhongji/data/jenkins_home:/var/jenkins_home</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8080:8080</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 50000:50000</span><span style="color:#A31515;">  jenkins/jenkins</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">-v</span><span style="color:#A31515;"> /etc/localtime:/etc/localtime</span><span style="color:#A31515;">   让容器使用和服务器同样的时间设置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">-v</span><span style="color:#A31515;"> /var/run/docker.sock:/var/run/docker.sock</span><span style="color:#A31515;"> 和宿主公用一个docker的方式启动</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="minio" tabindex="-1"><a class="header-anchor" href="#minio"><span>minio</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9000:9000</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9001:9001</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> minio1</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> D:</span><span style="color:#EE0000;">\\v</span><span style="color:#A31515;">olume</span><span style="color:#EE0000;">\\m</span><span style="color:#A31515;">inio</span><span style="color:#EE0000;">\\d</span><span style="color:#A31515;">ata:/data</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> &quot;MINIO_ROOT_USER=minio-admin&quot;</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> &quot;MINIO_ROOT_PASSWORD=minio-admin&quot;</span><span style="color:#A31515;"> quay.io/minio/minio</span><span style="color:#A31515;"> server</span><span style="color:#A31515;"> /data</span><span style="color:#0000FF;"> --console-address</span><span style="color:#A31515;"> &quot;:9001&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nacos" tabindex="-1"><a class="header-anchor" href="#nacos"><span>nacos</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> nacos-quick</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MODE=standalone</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8848:8848</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9848:9848</span><span style="color:#0000FF;"> -d</span><span style="color:#A31515;"> nacos/nacos-server:latest</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> nacos-quick</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MODE=standalone</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MYSQL_SERVICE_HOST=</span><span style="color:#098658;">192.168.3.90</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MYSQL_SERVICE_DB_NAME=nacos</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MYSQL_SERVICE_USER=root</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MYSQL_SERVICE_PASSWORD=</span><span style="color:#098658;">123456</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> SPRING_DATASOURCE_PLATFORM=mysql</span><span style="color:#0000FF;">  -p</span><span style="color:#A31515;"> 8848:8848</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9848:9848</span><span style="color:#0000FF;"> -d</span><span style="color:#A31515;"> wanhongji/nacos:v2.1.2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nacos集群及配置" tabindex="-1"><a class="header-anchor" href="#nacos集群及配置"><span>nacos集群及配置</span></a></h3>`,18),w={href:"https://blog.csdn.net/YYpawn/article/details/125890531",target:"_blank",rel:"noopener noreferrer"},O=e(`<p>使用nginx转发注册</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#800000;">version</span><span style="color:#000000;">: </span><span style="color:#A31515;">&quot;3.8&quot;</span></span>
<span class="line"><span style="color:#800000;">services</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">  nacos1</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    hostname</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos1</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos1</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">wanhongji/nacos:v2.1.2</span></span>
<span class="line"><span style="color:#800000;">    volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">/data/cluster-logs/nacos1:/home/nacos/logs</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;8849:8848&quot;</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9849:9848&quot;</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9555:9555&quot;</span></span>
<span class="line"><span style="color:#800000;">    env_file</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">./env/nacos-hostname.env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#800000;">  nacos2</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    hostname</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos2</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">wanhongji/nacos:v2.1.2</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos2</span></span>
<span class="line"><span style="color:#800000;">    volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">/data/cluster-logs/nacos2:/home/nacos/logs</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;8850:8848&quot;</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9850:9848&quot;</span></span>
<span class="line"><span style="color:#800000;">    env_file</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">./env/nacos-hostname.env</span></span>
<span class="line"></span>
<span class="line"><span style="color:#800000;">  nacos3</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    hostname</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos3</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">wanhongji/nacos:v2.1.2</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">nacos3</span></span>
<span class="line"><span style="color:#800000;">    volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">/data/cluster-logs/nacos3:/home/nacos/logs</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;8851:8848&quot;</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9851:9848&quot;</span></span>
<span class="line"><span style="color:#800000;">    env_file</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">./env/nacos-hostname.env</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="seata" tabindex="-1"><a class="header-anchor" href="#seata"><span>seata</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> seata</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8091:8091</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> SEATA_IP=</span><span style="color:#098658;">172.172.172.21</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> SEATA_CONFIG_NAME=file:/seata-server/resources/registry</span><span style="color:#0000FF;">  -v</span><span style="color:#A31515;"> /Users/dzl/opt/seata-config/resources:/seata-server/resources</span><span style="color:#A31515;"> seataio/seata-server:1.4.0</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="redis" tabindex="-1"><a class="header-anchor" href="#redis"><span>redis</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> redis</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 6379:6379</span><span style="color:#A31515;"> redis</span><span style="color:#0000FF;"> --requirepass</span><span style="color:#098658;"> 123456</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="rocketmq配置" tabindex="-1"><a class="header-anchor" href="#rocketmq配置"><span>rocketMq配置</span></a></h2><ul><li>服务</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> rocketmq</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9876:9876</span><span style="color:#A31515;">  foxiswho/rocketmq:server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 10911:10911</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 10909:10909</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;">  /Users/dzl/opt/broker.conf:/etc/rocketmq/broker.conf</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> rmqbroker</span><span style="color:#0000FF;"> --link</span><span style="color:#A31515;"> rocketmq:namesrv</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> &quot;NAMESRV_ADDR=namesrv:9876&quot;</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> &quot;JAVA_OPTS=-Duser.home=/opt&quot;</span><span style="color:#0000FF;">  -e</span><span style="color:#A31515;"> &quot;JAVA_OPT_EXT=-server -Xms512m -Xmx512m -Xmn256m&quot;</span><span style="color:#A31515;">  foxiswho/rocketmq:broker</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>broker.conf</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>brokerClusterName = DefaultCluster</span></span>
<span class="line"><span>brokerName = broker-a</span></span>
<span class="line"><span>brokerId = 0</span></span>
<span class="line"><span>deleteWhen = 04</span></span>
<span class="line"><span>fileReservedTime = 48</span></span>
<span class="line"><span>brokerRole = ASYNC_MASTER</span></span>
<span class="line"><span>flushDiskType = ASYNC_FLUSH</span></span>
<span class="line"><span>sendMessageThreadPoolNums=64</span></span>
<span class="line"><span>useReentrantLockWhenPutMessage=true</span></span>
<span class="line"><span>waitTimeMillsInSendQueue=30000</span></span>
<span class="line"><span>osPageCacheBusyTimeOutMills=5000</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>图形界面</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --restart=always</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> rcng</span><span style="color:#0000FF;"> --link</span><span style="color:#A31515;"> rocketmq:namesrv</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=namesrv:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false&quot;</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8099:8080</span><span style="color:#0000FF;"> -t</span><span style="color:#A31515;"> styletang/rocketmq-console-ng</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>配置idea jvm参数 -Dcom.rocketmq.sendMessageWithVIPChannel=false</span></span>
<span class="line"><span></span></span>
<span class="line"><span>本地开发若出现 172.17.0.xxx:10911发送消息失败 则修改brokerIP1</span></span>
<span class="line"><span>本地开发若出现 no route xxx 则修改autoCreateTopicEnable=true</span></span>
<span class="line"><span>docker exec -it xxx(容器id) bash</span></span>
<span class="line"><span>cd /etc/rocketmq/</span></span>
<span class="line"><span>echo &#39;autoCreateTopicEnable=true&#39; &gt;&gt; broker.conf</span></span>
<span class="line"><span>echo &#39;brokerIP1 = 172.172.172.98&#39; &gt;&gt; broker.conf</span></span>
<span class="line"><span>exit</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="elasticsearch配置" tabindex="-1"><a class="header-anchor" href="#elasticsearch配置"><span>elasticsearch配置</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>启动命令中有内网IP自行修改</span></span>
<span class="line"><span>docker run -d --restart=always --name es -p 9200:9200 -e http.port=9200 -e http.cors.enabled=true -e http.cors.allow-origin=http://localhost:1358,http://127.0.0.1:1358,http://172.172.172.212:1358 -e http.cors.allow-headers=X-Requested-With,X-Auth-Token,Content-Type,Content-Length,Authorization -e http.cors.allow-credentials=true -e TZ=&quot;Asia/Shanghai&quot; -e &quot;discovery.type=single-node&quot; registry.cn-hangzhou.aliyuncs.com/hrsoft/elasticsearch:6.7.2</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- 搜索引擎数据查询工具 dejavu</span></span>
<span class="line"><span>docker run --restart=always -p 1358:1358 -d appbaseio/dejavu</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-- 搜索引擎管理工具 cerebro</span></span>
<span class="line"><span>docker run -d -p 9000:9000 --restart=unless-stopped --name cerebro lmenezes/cerebro</span></span>
<span class="line"><span></span></span>
<span class="line"><span>-Djava.security.egd=file:/dev/./urandom</span></span>
<span class="line"><span>-Xmx1G -Xms1G -XX:+PrintGCDetails</span></span>
<span class="line"><span>-XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps</span></span>
<span class="line"><span>-XX:+PrintTenuringDistribution</span></span>
<span class="line"><span>-DNACOS_HOST=127.0.0.1</span></span>
<span class="line"><span>-DMYSQL_HOST=172.172.172.xxx</span></span>
<span class="line"><span>-DMYSQL_PORT=3306</span></span>
<span class="line"><span>-DMYSQL_PASSWORD=123456</span></span>
<span class="line"><span>-DMONITOR_HOST=127.0.0.1</span></span>
<span class="line"><span>-Dspring.cloud.nacos.discovery.metadata.region=dzl</span></span>
<span class="line"><span>本地开发，若出现connect time out xx.xx.xx.xx(docker 虚拟机IP)：8511 即注册服务的时候IP错位，需要注册自己本地使用的网络IP</span></span>
<span class="line"><span>-Dspring.cloud.inetutils.preferredNetworks=172.172</span></span>
<span class="line"><span>Operating Platform Managent System</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="cerebro" tabindex="-1"><a class="header-anchor" href="#cerebro"><span>cerebro</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> cerebro</span><span style="color:#0000FF;"> --restart</span><span style="color:#A31515;"> always</span><span style="color:#0000FF;"> -d</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 9001:9000</span><span style="color:#A31515;"> lmenezes/cerebro:0.9.4</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="es和kibana" tabindex="-1"><a class="header-anchor" href="#es和kibana"><span>es和kibana</span></a></h2><p>8.0版本默认开启security，配置繁琐</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;"># 以下镜像支持arm64版本</span></span>
<span class="line"><span style="color:#800000;">version</span><span style="color:#000000;">: </span><span style="color:#0000FF;">&#39;2&#39;</span></span>
<span class="line"><span style="color:#800000;">services</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">  redis</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">redis:alpine</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks-ce-redis</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;6379:6379&quot;</span></span>
<span class="line"><span style="color:#800000;">    volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;redis-volume:/data&quot;</span></span>
<span class="line"><span style="color:#800000;">    command</span><span style="color:#000000;">: </span><span style="color:#0000FF;">redis-server --appendonly yes</span></span>
<span class="line"><span style="color:#800000;">    environment</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">TZ=Asia/Shanghai</span></span>
<span class="line"><span style="color:#800000;">  elasticsearch</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">elasticsearch:7.17.7</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks-ce-elasticsearch</span></span>
<span class="line"><span style="color:#800000;">    environment</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">      ES_JAVA_OPTS</span><span style="color:#000000;">: </span><span style="color:#0000FF;">-Djava.net.preferIPv4Stack=true -Xms512m -Xmx512m</span></span>
<span class="line"><span style="color:#800000;">      transport.host</span><span style="color:#000000;">: </span><span style="color:#098658;">0.0.0.0</span></span>
<span class="line"><span style="color:#800000;">      network.host</span><span style="color:#000000;">: </span><span style="color:#098658;">0.0.0.0</span></span>
<span class="line"><span style="color:#800000;">      network.publish_host</span><span style="color:#000000;">: </span><span style="color:#098658;">10.142.51.108</span></span>
<span class="line"><span style="color:#800000;">      http.port</span><span style="color:#000000;">: </span><span style="color:#098658;">9200</span></span>
<span class="line"><span style="color:#800000;">      transport.port</span><span style="color:#000000;">: </span><span style="color:#098658;">9300</span></span>
<span class="line"><span style="color:#800000;">      discovery.type</span><span style="color:#000000;">: </span><span style="color:#0000FF;">single-node</span></span>
<span class="line"><span style="color:#800000;">      bootstrap.memory_lock</span><span style="color:#000000;">: </span><span style="color:#A31515;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#800000;">      discovery.seed_hosts</span><span style="color:#000000;">: </span><span style="color:#0000FF;">elasticsearch</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9200:9200&quot;</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;9300:9300&quot;</span></span>
<span class="line"><span style="color:#800000;">  kibana</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">kibana:7.17.7</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks-ce-kibana</span></span>
<span class="line"><span style="color:#800000;">    environment</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">      ELASTICSEARCH_URL</span><span style="color:#000000;">: </span><span style="color:#0000FF;">http://elasticsearch:9200</span></span>
<span class="line"><span style="color:#800000;">    links</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">elasticsearch:elasticsearch</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;5601:5601&quot;</span></span>
<span class="line"><span style="color:#800000;">    depends_on</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#0000FF;">elasticsearch</span></span>
<span class="line"><span style="color:#800000;">  postgres</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    image</span><span style="color:#000000;">: </span><span style="color:#0000FF;">postgres:alpine</span></span>
<span class="line"><span style="color:#800000;">    container_name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks-ce-postgres</span></span>
<span class="line"><span style="color:#800000;">    ports</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;5432:5432&quot;</span></span>
<span class="line"><span style="color:#800000;">    volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#000000;">      - </span><span style="color:#A31515;">&quot;postgres-volume:/var/lib/postgresql/data&quot;</span></span>
<span class="line"><span style="color:#800000;">    environment</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">      POSTGRES_PASSWORD</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks</span></span>
<span class="line"><span style="color:#800000;">      POSTGRES_DB</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jetlinks</span></span>
<span class="line"><span style="color:#800000;">      TZ</span><span style="color:#000000;">: </span><span style="color:#0000FF;">Asia/Shanghai</span></span>
<span class="line"><span style="color:#800000;">volumes</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">  postgres-volume</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">  redis-volume</span><span style="color:#000000;">:</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql"><span>mysql</span></a></h2><ul><li>5.7加密方式mysql_native_password 加密插件</li><li>8.0以上版本使用另一种加密方式caching_sha2_password</li><li>8以后使用外部挂载必须配置mysql-files挂载 -v /mydata/mysql/mysql-files:/var/lib/mysql-files/</li></ul><div class="language-console line-numbers-mode" data-ext="console" data-title="console"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#000000;">docker run -p 3306:3306 --name mysql-8.0.20 -v /mydata/mysql/mysql-files:/var/lib/mysql-files/ -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:8.0.20</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;">docker run -p 3306:3306 --name mysql-5.7  -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</span></span>
<span class="line"></span>
<span class="line"><span style="color:#000000;">docker run --restart=always -v /data/mysql/conf:/etc/mysql/conf.d -v /data/mysql/data:/var/lib/mysql --name mysql -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 -d mysql:latest</span></span>
<span class="line"><span style="color:#000000;">select host,user,plugin from user;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="access-denied" tabindex="-1"><a class="header-anchor" href="#access-denied"><span>access denied</span></a></h3><blockquote><p>方案1</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;"># 容器启动添加配置</span></span>
<span class="line"><span style="color:#008000;"># --default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 3306:3306</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> mysql-8.0.20</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/mysql-files:/var/lib/mysql-files/</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/data:/var/lib/mysql</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/conf:/etc/mysql</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> MYSQL_ROOT_PASSWORD=</span><span style="color:#098658;">123456</span><span style="color:#0000FF;"> -d</span><span style="color:#A31515;"> mysql:8.0.20</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方案2</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;">#不设密码登录</span></span>
<span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 3306:3306</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> mysql-8.0.20</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/mysql-files:/var/lib/mysql-files/</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/data:/var/lib/mysql</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /mydata/mysql/conf:/etc/mysql</span><span style="color:#0000FF;"> -d</span><span style="color:#A31515;"> mysql:8.0.20</span><span style="color:#0000FF;"> --default-authentication-plugin=mysql_native_password</span></span>
<span class="line"><span style="color:#000000;"> </span></span>
<span class="line"><span style="color:#008000;">#切换数据库</span></span>
<span class="line"><span style="color:#795E26;">use</span><span style="color:#A31515;"> mysql</span><span style="color:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">#设置密码</span></span>
<span class="line"><span style="color:#008000;">#PASSWORD EXPIRE NEVER 密码永不过期</span></span>
<span class="line"><span style="color:#008000;">#mysql_native_password 加密插件</span></span>
<span class="line"><span style="color:#795E26;">ALTER</span><span style="color:#A31515;"> USER</span><span style="color:#A31515;"> &#39;root&#39;@&#39;localhost&#39;</span><span style="color:#A31515;"> IDENTIFIED</span><span style="color:#A31515;"> WITH</span><span style="color:#A31515;"> mysql_native_password</span><span style="color:#A31515;"> BY</span><span style="color:#A31515;"> &#39;123456&#39;</span><span style="color:#A31515;"> PASSWORD</span><span style="color:#A31515;"> EXPIRE</span><span style="color:#A31515;"> NEVER</span><span style="color:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">ALTER</span><span style="color:#A31515;"> USER</span><span style="color:#A31515;"> &#39;root&#39;@&#39;localhost&#39;</span><span style="color:#A31515;"> IDENTIFIED</span><span style="color:#A31515;"> WITH</span><span style="color:#A31515;"> mysql_native_password</span><span style="color:#A31515;"> BY</span><span style="color:#A31515;"> &#39;123456&#39;</span><span style="color:#000000;">;</span></span>
<span class="line"><span style="color:#795E26;">ALTER</span><span style="color:#A31515;"> USER</span><span style="color:#A31515;"> &#39;root&#39;@&#39;%&#39;</span><span style="color:#A31515;"> IDENTIFIED</span><span style="color:#A31515;"> WITH</span><span style="color:#A31515;"> mysql_native_password</span><span style="color:#A31515;"> BY</span><span style="color:#A31515;"> &#39;123456&#39;</span><span style="color:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#795E26;">刷新权限</span></span>
<span class="line"><span style="color:#795E26;">flush</span><span style="color:#A31515;"> privileges</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>方案3</p></blockquote><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>使用配置文件跳过检查</span></span>
<span class="line"><span>mysql8之前的是在my.ini文件中【mysqld】中加一句的 mysql8的话是：在管理员打开的cmd</span></span>
<span class="line"><span>进入到mysql的bin目录下输入</span></span>
<span class="line"><span>mysqld --console --skip-grant-tables --shared-memory</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>再设置加密方式和密码</span></span>
<span class="line"><span>#my.cnf文件的存放路径根据自己需求自定义即可</span></span>
<span class="line"><span>vim /root/data/mysql/my.cnf</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#编辑内容 在vi编辑器中输入以下内容</span></span>
<span class="line"><span>[mysqld]</span></span>
<span class="line"><span>default_authentication_plugin=mysql_native_password</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#保存并退出vi编辑器 如何使用vi编辑器请自行百度 这里不再赘述</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nexus" tabindex="-1"><a class="header-anchor" href="#nexus"><span>nexus</span></a></h2><p>搭建maven私有仓库</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#795E26;">docker</span><span style="color:#A31515;"> run</span><span style="color:#0000FF;">  -d</span><span style="color:#0000FF;"> --name</span><span style="color:#A31515;"> nexus</span><span style="color:#0000FF;"> -v</span><span style="color:#A31515;"> /data/nexus:/nexus-data</span><span style="color:#0000FF;"> -e</span><span style="color:#A31515;"> NEXUS_CONTEXT=nexus</span><span style="color:#0000FF;"> -p</span><span style="color:#A31515;"> 8081:8081</span><span style="color:#A31515;"> sonatype/nexus3:latest</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,34);function R(D,I){const n=o("ExternalLinkIcon");return i(),r("div",null,[t,s("p",null,[s("a",d,[a("参考"),l(n)])]),s("p",null,[s("a",v,[a("参考"),l(n)])]),s("p",null,[s("a",y,[a("参考"),l(n)])]),u,s("p",null,[s("a",m,[a("安装配置"),l(n)])]),s("p",null,[s("a",b,[a("安装参考"),l(n)])]),s("p",null,[s("a",F,[a("配置文件参考"),l(n)])]),h,s("p",null,[s("a",k,[a("共享runner配置"),l(n)])]),s("p",null,[s("a",A,[a("runner"),l(n)])]),s("p",null,[s("a",g,[a("参考"),l(n)])]),s("p",null,[s("a",_,[a("参考"),l(n)])]),s("p",null,[s("a",E,[a("参考"),l(n)])]),q,s("p",null,[s("a",x,[a("安装"),l(n)])]),s("p",null,[s("a",f,[a("下载"),l(n)])]),j,s("p",null,[s("a",T,[a("安装配置"),l(n)])]),S,s("p",null,[s("a",w,[a("参考"),l(n)])]),O])}const P=p(c,[["render",R],["__file","docker容器启动命令.html.vue"]]),C=JSON.parse('{"path":"/note/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83/docker%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4.html","title":"docker容器启动命令","lang":"zh-CN","frontmatter":{"description":"docker容器启动命令 rabbitmq kafka 参考 参考 参考 gitlab 安装配置 安装参考 配置文件参考 密码 wanhongji/whj123456 gitlab runner 嵌套逻辑 共享runner配置 runner 参考 参考 参考 harbor 安装 下载 密码 Harbor12345 使用超级管理员执行sudo 推送时需登...","head":[["meta",{"property":"og:url","content":"https://wherywan.github.io/note/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83/docker%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E5%91%BD%E4%BB%A4.html"}],["meta",{"property":"og:site_name","content":"HONG_JI"}],["meta",{"property":"og:title","content":"docker容器启动命令"}],["meta",{"property":"og:description","content":"docker容器启动命令 rabbitmq kafka 参考 参考 参考 gitlab 安装配置 安装参考 配置文件参考 密码 wanhongji/whj123456 gitlab runner 嵌套逻辑 共享runner配置 runner 参考 参考 参考 harbor 安装 下载 密码 Harbor12345 使用超级管理员执行sudo 推送时需登..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-12-26T03:13:18.000Z"}],["meta",{"property":"article:author","content":"wanhongji"}],["meta",{"property":"article:modified_time","content":"2024-12-26T03:13:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"docker容器启动命令\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-12-26T03:13:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"wanhongji\\"}]}"]]},"headers":[{"level":2,"title":"rabbitmq","slug":"rabbitmq","link":"#rabbitmq","children":[]},{"level":2,"title":"kafka","slug":"kafka","link":"#kafka","children":[]},{"level":2,"title":"gitlab","slug":"gitlab","link":"#gitlab","children":[{"level":3,"title":"gitlab runner","slug":"gitlab-runner","link":"#gitlab-runner","children":[]}]},{"level":2,"title":"harbor","slug":"harbor","link":"#harbor","children":[]},{"level":2,"title":"jenkins","slug":"jenkins","link":"#jenkins","children":[]},{"level":2,"title":"minio","slug":"minio","link":"#minio","children":[]},{"level":2,"title":"nacos","slug":"nacos","link":"#nacos","children":[{"level":3,"title":"nacos集群及配置","slug":"nacos集群及配置","link":"#nacos集群及配置","children":[]}]},{"level":2,"title":"seata","slug":"seata","link":"#seata","children":[]},{"level":2,"title":"redis","slug":"redis","link":"#redis","children":[]},{"level":2,"title":"rocketMq配置","slug":"rocketmq配置","link":"#rocketmq配置","children":[]},{"level":2,"title":"elasticsearch配置","slug":"elasticsearch配置","link":"#elasticsearch配置","children":[]},{"level":2,"title":"cerebro","slug":"cerebro","link":"#cerebro","children":[]},{"level":2,"title":"es和kibana","slug":"es和kibana","link":"#es和kibana","children":[]},{"level":2,"title":"mysql","slug":"mysql","link":"#mysql","children":[{"level":3,"title":"access denied","slug":"access-denied","link":"#access-denied","children":[]}]},{"level":2,"title":"nexus","slug":"nexus","link":"#nexus","children":[]}],"git":{"createdTime":1658660900000,"updatedTime":1735182798000,"contributors":[{"name":"wanhongji","email":"wherywan@163.com","commits":16},{"name":"wanhongji","email":"wan_hongji@163.com","commits":9},{"name":"wanhongji","email":"wheywan@163.com","commits":1}]},"readingTime":{"minutes":7.58,"words":2273},"filePathRelative":"note/服务器环境/docker容器启动命令.md","localizedDate":"2022年7月24日","excerpt":"\\n<h2>rabbitmq</h2>\\n<div class=\\"language-bash line-numbers-mode\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"shiki light-plus\\" style=\\"background-color:#FFFFFF;color:#000000\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span style=\\"color:#795E26\\">docker</span><span style=\\"color:#A31515\\"> run</span><span style=\\"color:#0000FF\\"> -d</span><span style=\\"color:#0000FF\\"> --name</span><span style=\\"color:#A31515\\"> rabbit</span><span style=\\"color:#0000FF\\"> -p</span><span style=\\"color:#A31515\\"> 5672:5672</span><span style=\\"color:#0000FF\\"> -p</span><span style=\\"color:#A31515\\"> 15762:15672</span><span style=\\"color:#0000FF\\"> -e</span><span style=\\"color:#A31515\\"> RABBITMQ_DEFAULT_USER=admin</span><span style=\\"color:#0000FF\\"> -e</span><span style=\\"color:#A31515\\"> RABBITMQ_DEFAULT_PASS=</span><span style=\\"color:#098658\\">123456</span><span style=\\"color:#A31515\\"> arm64v8/rabbitmq:3-management</span></span>\\n<span class=\\"line\\"></span></code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{P as comp,C as data};
