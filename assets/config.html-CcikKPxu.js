import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as l,e as a}from"./app-hoN0JGLf.js";const e={},p=a(`<h1 id="配置" tabindex="-1"><a class="header-anchor" href="#配置"><span>配置</span></a></h1><h2 id="获取项目目录的方式" tabindex="-1"><a class="header-anchor" href="#获取项目目录的方式"><span>获取项目目录的方式</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span>//获取项目路径</span></span>
<span class="line"><span>System.getProperty(&quot;user.dir&quot;)</span></span>
<span class="line"><span>//获取Jar包路径</span></span>
<span class="line"><span>String path4 = Main.class.getProtectionDomain().getCodeSource().getLocation().getFile();</span></span>
<span class="line"><span>String path4_1 = Main.class.getProtectionDomain().getCodeSource().getLocation().getPath()</span></span>
<span class="line"><span>//获取Jar包中指定资源的路径</span></span>
<span class="line"><span>Main.class.getClassLoader().getResource(&quot;hello.text&quot;).getFile();</span></span>
<span class="line"><span></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="properties或yaml配置文件加载优先级" tabindex="-1"><a class="header-anchor" href="#properties或yaml配置文件加载优先级"><span>properties或yaml配置文件加载优先级</span></a></h2><p>第一种是在jar包的同一目录下建一个config文件夹，然后把配置文件放到这个文件夹下； 第二种是直接把配置文件放到jar包的同级目录； 第三种在classpath下建一个config文件夹，然后把配置文件放进去； 第四种是在classpath下直接放配置文件</p><blockquote><p>注意点</p></blockquote><ul><li>spring.config.location配置配置文件扫描路径,否则使用默认</li><li>spring.config.name配置扫描的文件名，否则使用默认application</li><li>默认查询位置DEFAULT_SEARCH_LOCATIONS = &quot;classpath:/,classpath:/config/,file:./,file:./config/*/,file:./config/</li><li>类路径下和类路径config下同名配置文件，config下的生效</li><li>按优先级顺序排列属性配置对象，按顺序查找,存在则直接返回属性值，否则在下一个配置对象查找</li></ul><blockquote><p>非活动profile</p></blockquote><ol><li><p>当同一个配置属性在bootstrap.properties和bootstrap.yml文件中都存在时，那么properties中的配置会被加载，而忽略yml文件中的配置（即优先级高的配置覆盖优先级低的配置），不同配置相互互补。此处application(.properties/yml)同理。</p></li><li><p>但当同一配置在bootstrap.properties和application.properties中都存在时，那么虽然优先加载bootstrap.properties但是会被applicatioin.properties中的配置覆盖，此时则变成了低优先级覆盖高优先的配置，所以网上很多文章所说的高优先级覆盖低优先级其实是不严谨的。</p></li><li><p>不同的配置会进行互补操作，即SpringBoot会读取全部的配置文件，加载所有不同的配置项，汇成一个总的配置。</p></li></ol><blockquote><p>活动profile</p></blockquote><ul><li>综上此时的加载优先级变为了bootstrap-dev.yml -&gt; bootstrap.properties -&gt; application-dev.yml -&gt;application.properties。且同属性配置的覆盖问题和之前一样，在同为bootstrap或同为application的情况下，优先级高的覆盖优先级低的。但当同时存在bootstrap和application时后者仍会覆盖前者中的配置。</li></ul><p>举例1：假如此时只有bootstrap-dev.yml 和bootstrap.properties且存在相同配置，则使用bootstrap-dev.yml中的配置，此时遵循高优先级覆盖低优先级。</p><p>举例2：假如此时有bootstrap-dev.yml 、bootstrap.properties及application.properties且存在相同配置，则使用application.properties中的配置，遵循application覆盖bootstrap原则，同样此时变成了低优先级覆盖高优先级。</p><h2 id="静态资源路径配置" tabindex="-1"><a class="header-anchor" href="#静态资源路径配置"><span>静态资源路径配置</span></a></h2><blockquote><p>默认路径 /**</p></blockquote><ul><li>classpath:/public</li><li>classpath:/static</li><li>classpath:/resources</li><li>classpath:/META-INF/resources</li></ul><blockquote><p>全局配置,覆盖springboot默认配置</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#800000;">spring</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#008000;">#    配置静态资源访问前缀</span></span>
<span class="line"><span style="color:#800000;">  mvc</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    static-path-pattern</span><span style="color:#000000;">: </span><span style="color:#0000FF;">/res/**</span></span>
<span class="line"><span style="color:#008000;">#    配置静态资源路径</span></span>
<span class="line"><span style="color:#800000;">  web</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    resources</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">      static-locations</span><span style="color:#000000;">: </span><span style="color:#0000FF;">classpath:/123/</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>追加资源路径配置</p></blockquote><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#0000FF;">public</span><span style="color:#0000FF;"> class</span><span style="color:#267F99;"> WebConfig</span><span style="color:#0000FF;"> implements</span><span style="color:#267F99;"> WebMvcConfigurer</span><span style="color:#000000;">{</span></span>
<span class="line"><span style="color:#0000FF;">    public</span><span style="color:#267F99;"> void</span><span style="color:#795E26;"> addResourceHandlers</span><span style="color:#000000;">(</span><span style="color:#267F99;">ResourceHandlerRegistry</span><span style="color:#001080;"> registry</span><span style="color:#000000;">) {</span></span>
<span class="line"><span style="color:#001080;">        registry</span><span style="color:#000000;">.</span><span style="color:#795E26;">addResourceHandler</span><span style="color:#000000;">(</span><span style="color:#AF00DB;">new</span><span style="color:#267F99;"> String</span><span style="color:#000000;">[]{</span><span style="color:#A31515;">&quot;/jmreport/desreport_/**&quot;</span><span style="color:#000000;">}).</span><span style="color:#795E26;">addResourceLocations</span><span style="color:#000000;">(</span><span style="color:#AF00DB;">new</span><span style="color:#267F99;"> String</span><span style="color:#000000;">[]{</span><span style="color:#A31515;">&quot;classpath:/static/jmreport/desreport_/&quot;</span><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#001080;">        registry</span><span style="color:#000000;">.</span><span style="color:#795E26;">addResourceHandler</span><span style="color:#000000;">(</span><span style="color:#AF00DB;">new</span><span style="color:#267F99;"> String</span><span style="color:#000000;">[]{</span><span style="color:#A31515;">&quot;/jmreport/img/**&quot;</span><span style="color:#000000;">}).</span><span style="color:#795E26;">addResourceLocations</span><span style="color:#000000;">(</span><span style="color:#AF00DB;">new</span><span style="color:#267F99;"> String</span><span style="color:#000000;">[]{</span><span style="color:#A31515;">&quot;file:&quot;</span><span style="color:#000000;"> + </span><span style="color:#0000FF;">this</span><span style="color:#000000;">.</span><span style="color:#001080;">jmReportUploadConfig</span><span style="color:#000000;">.</span><span style="color:#795E26;">getPath</span><span style="color:#000000;">().</span><span style="color:#795E26;">getUpload</span><span style="color:#000000;">() + </span><span style="color:#A31515;">&quot;//&quot;</span><span style="color:#000000;">});</span></span>
<span class="line"><span style="color:#000000;">    }</span></span>
<span class="line"><span style="color:#000000;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数据库及连接池配置" tabindex="-1"><a class="header-anchor" href="#数据库及连接池配置"><span>数据库及连接池配置</span></a></h2><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#800000;">spring</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    datasource</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">        driver-class-name</span><span style="color:#000000;">: </span><span style="color:#0000FF;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#800000;">        url</span><span style="color:#000000;">: </span><span style="color:#0000FF;">jdbc:mysql://\${MYSQL-HOST:10.142.51.150}:\${MYSQL-PORT:1170}/\${MYSQL-DB:baiyin}?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true</span></span>
<span class="line"><span style="color:#800000;">        username</span><span style="color:#000000;">: </span><span style="color:#0000FF;">root</span></span>
<span class="line"><span style="color:#800000;">        password</span><span style="color:#000000;">: </span><span style="color:#0000FF;">\${MYSQL-PASSWORD:mysql_Techsel2o19}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="log" tabindex="-1"><a class="header-anchor" href="#log"><span>log</span></a></h2><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#008000;"># 日志配置 debug&lt;info&lt;warn&lt;Error&lt;Fatal</span></span>
<span class="line"><span style="color:#800000;">logging</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">  level</span><span style="color:#000000;">:</span></span>
<span class="line"><span style="color:#800000;">    org.springframework</span><span style="color:#000000;">: </span><span style="color:#0000FF;">warn</span></span>
<span class="line"><span style="color:#800000;">    com.alibaba.nacos</span><span style="color:#000000;">: </span><span style="color:#0000FF;">warn</span></span>
<span class="line"><span style="color:#800000;">    com.alibaba.druid.pool</span><span style="color:#000000;">: </span><span style="color:#0000FF;">warn</span></span>
<span class="line"><span style="color:#800000;">    com.techsel</span><span style="color:#000000;">: </span><span style="color:#0000FF;">DEBUG</span></span>
<span class="line"><span style="color:#800000;">    org.springframework.security</span><span style="color:#000000;">: </span><span style="color:#0000FF;">DEBUG</span></span>
<span class="line"><span style="color:#800000;">  config</span><span style="color:#000000;">: </span><span style="color:#0000FF;">classpath:logback.xml</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="shiki light-plus" style="background-color:#FFFFFF;color:#000000;" tabindex="0"><code><span class="line"><span style="color:#800000;">&lt;?xml</span><span style="color:#E50000;"> version</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;1.0&quot;</span><span style="color:#E50000;"> encoding</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;UTF-8&quot;</span><span style="color:#800000;">?&gt;</span></span>
<span class="line"><span style="color:#800000;">&lt;configuration</span><span style="color:#E50000;"> scan</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;true&quot;</span><span style="color:#E50000;"> scanPeriod</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;60 seconds&quot;</span><span style="color:#E50000;"> debug</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;false&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">    &lt;!-- 日志存放路径 --&gt;</span></span>
<span class="line"><span style="color:#800000;">	&lt;property</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;log.path&quot;</span><span style="color:#E50000;"> value</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;./logs&quot;</span><span style="color:#800000;"> /&gt;</span></span>
<span class="line"><span style="color:#008000;">   &lt;!-- 日志输出格式 --&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;property</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;console.log.pattern&quot;</span></span>
<span class="line"><span style="color:#E50000;">              value</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;%red(%d{yyyy-MM-dd HH:mm:ss}) %green([%thread]) %highlight(%-5level) %boldMagenta(%logger{36}%n) - %msg%n&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;property</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;log.pattern&quot;</span><span style="color:#E50000;"> value</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">    &lt;!-- 控制台输出 --&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;console&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;pattern&gt;</span><span style="color:#000000;">\${console.log.pattern}</span><span style="color:#800000;">&lt;/pattern&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;charset&gt;</span><span style="color:#000000;">utf-8</span><span style="color:#800000;">&lt;/charset&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">    &lt;!-- 控制台输出 --&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_console&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;file&gt;</span><span style="color:#000000;">\${log.path}/console.log</span><span style="color:#800000;">&lt;/file&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;rollingPolicy</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 日志文件名格式 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;fileNamePattern&gt;</span><span style="color:#000000;">\${log.path}/console.%d{yyyy-MM-dd}.log</span><span style="color:#800000;">&lt;/fileNamePattern&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 日志最大 1天 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;maxHistory&gt;</span><span style="color:#000000;">1</span><span style="color:#800000;">&lt;/maxHistory&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/rollingPolicy&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;pattern&gt;</span><span style="color:#000000;">\${log.pattern}</span><span style="color:#800000;">&lt;/pattern&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;charset&gt;</span><span style="color:#000000;">utf-8</span><span style="color:#800000;">&lt;/charset&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;filter</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.classic.filter.ThresholdFilter&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 过滤的级别 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;level&gt;</span><span style="color:#000000;">INFO</span><span style="color:#800000;">&lt;/level&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/filter&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">    &lt;!-- 系统日志输出 --&gt;</span></span>
<span class="line"><span style="color:#800000;">	&lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_info&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#800000;">	    &lt;file&gt;</span><span style="color:#000000;">\${log.path}/info.log</span><span style="color:#800000;">&lt;/file&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 循环政策：基于时间创建日志文件 --&gt;</span></span>
<span class="line"><span style="color:#800000;">		&lt;rollingPolicy</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 日志文件名格式 --&gt;</span></span>
<span class="line"><span style="color:#800000;">			&lt;fileNamePattern&gt;</span><span style="color:#000000;">\${log.path}/info.%d{yyyy-MM-dd}.log</span><span style="color:#800000;">&lt;/fileNamePattern&gt;</span></span>
<span class="line"><span style="color:#008000;">			&lt;!-- 日志最大的历史 60天 --&gt;</span></span>
<span class="line"><span style="color:#800000;">			&lt;maxHistory&gt;</span><span style="color:#000000;">60</span><span style="color:#800000;">&lt;/maxHistory&gt;</span></span>
<span class="line"><span style="color:#800000;">		&lt;/rollingPolicy&gt;</span></span>
<span class="line"><span style="color:#800000;">		&lt;encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">			&lt;pattern&gt;</span><span style="color:#000000;">\${log.pattern}</span><span style="color:#800000;">&lt;/pattern&gt;</span></span>
<span class="line"><span style="color:#800000;">		&lt;/encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">		&lt;filter</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 过滤的级别 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;level&gt;</span><span style="color:#000000;">INFO</span><span style="color:#800000;">&lt;/level&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 匹配时的操作：接收（记录） --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;onMatch&gt;</span><span style="color:#000000;">ACCEPT</span><span style="color:#800000;">&lt;/onMatch&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 不匹配时的操作：拒绝（不记录） --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;onMismatch&gt;</span><span style="color:#000000;">DENY</span><span style="color:#800000;">&lt;/onMismatch&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/filter&gt;</span></span>
<span class="line"><span style="color:#800000;">	&lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#800000;">    &lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_error&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#800000;">	    &lt;file&gt;</span><span style="color:#000000;">\${log.path}/error.log</span><span style="color:#800000;">&lt;/file&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 循环政策：基于时间创建日志文件 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;rollingPolicy</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 日志文件名格式 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;fileNamePattern&gt;</span><span style="color:#000000;">\${log.path}/error.%d{yyyy-MM-dd}.log</span><span style="color:#800000;">&lt;/fileNamePattern&gt;</span></span>
<span class="line"><span style="color:#008000;">			&lt;!-- 日志最大的历史 60天 --&gt;</span></span>
<span class="line"><span style="color:#800000;">			&lt;maxHistory&gt;</span><span style="color:#000000;">60</span><span style="color:#800000;">&lt;/maxHistory&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/rollingPolicy&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;pattern&gt;</span><span style="color:#000000;">\${log.pattern}</span><span style="color:#800000;">&lt;/pattern&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/encoder&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;filter</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">            &lt;!-- 过滤的级别 --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;level&gt;</span><span style="color:#000000;">ERROR</span><span style="color:#800000;">&lt;/level&gt;</span></span>
<span class="line"><span style="color:#008000;">			&lt;!-- 匹配时的操作：接收（记录） --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;onMatch&gt;</span><span style="color:#000000;">ACCEPT</span><span style="color:#800000;">&lt;/onMatch&gt;</span></span>
<span class="line"><span style="color:#008000;">			&lt;!-- 不匹配时的操作：拒绝（不记录） --&gt;</span></span>
<span class="line"><span style="color:#800000;">            &lt;onMismatch&gt;</span><span style="color:#000000;">DENY</span><span style="color:#800000;">&lt;/onMismatch&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;/filter&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">    &lt;!-- info异步输出 --&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;async_info&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;discardingThreshold&gt;</span><span style="color:#000000;">0</span><span style="color:#800000;">&lt;/discardingThreshold&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;queueSize&gt;</span><span style="color:#000000;">512</span><span style="color:#800000;">&lt;/queueSize&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 添加附加的appender,最多只能添加一个 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_info&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">    &lt;!-- error异步输出 --&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;appender</span><span style="color:#E50000;"> name</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;async_error&quot;</span><span style="color:#E50000;"> class</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;ch.qos.logback.classic.AsyncAppender&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;discardingThreshold&gt;</span><span style="color:#000000;">0</span><span style="color:#800000;">&lt;/discardingThreshold&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 更改默认的队列的深度,该值会影响性能.默认值为256 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;queueSize&gt;</span><span style="color:#000000;">512</span><span style="color:#800000;">&lt;/queueSize&gt;</span></span>
<span class="line"><span style="color:#008000;">        &lt;!-- 添加附加的appender,最多只能添加一个 --&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_error&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/appender&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#008000;">	&lt;!--系统操作日志--&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;root</span><span style="color:#E50000;"> level</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;info&quot;</span><span style="color:#800000;">&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;console&quot;</span><span style="color:#800000;"> /&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;async_info&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;async_error&quot;</span><span style="color:#800000;">/&gt;</span></span>
<span class="line"><span style="color:#800000;">        &lt;appender-ref</span><span style="color:#E50000;"> ref</span><span style="color:#000000;">=</span><span style="color:#0000FF;">&quot;file_console&quot;</span><span style="color:#800000;"> /&gt;</span></span>
<span class="line"><span style="color:#800000;">    &lt;/root&gt;</span></span>
<span class="line"><span style="color:#800000;">&lt;/configuration&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25),o=[p];function t(i,c){return n(),l("div",null,o)}const y=s(e,[["render",t],["__file","config.html.vue"]]),v=JSON.parse('{"path":"/note/web/config.html","title":"配置","lang":"zh-CN","frontmatter":{"category":["web"],"description":"配置 获取项目目录的方式 properties或yaml配置文件加载优先级 第一种是在jar包的同一目录下建一个config文件夹，然后把配置文件放到这个文件夹下； 第二种是直接把配置文件放到jar包的同级目录； 第三种在classpath下建一个config文件夹，然后把配置文件放进去； 第四种是在classpath下直接放配置文件 注意点 spri...","head":[["meta",{"property":"og:url","content":"https://wherywan.github.io/note/web/config.html"}],["meta",{"property":"og:site_name","content":"HONG_JI"}],["meta",{"property":"og:title","content":"配置"}],["meta",{"property":"og:description","content":"配置 获取项目目录的方式 properties或yaml配置文件加载优先级 第一种是在jar包的同一目录下建一个config文件夹，然后把配置文件放到这个文件夹下； 第二种是直接把配置文件放到jar包的同级目录； 第三种在classpath下建一个config文件夹，然后把配置文件放进去； 第四种是在classpath下直接放配置文件 注意点 spri..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-10-19T10:52:04.000Z"}],["meta",{"property":"article:author","content":"wanhongji"}],["meta",{"property":"article:modified_time","content":"2023-10-19T10:52:04.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"配置\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-10-19T10:52:04.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"wanhongji\\"}]}"]]},"headers":[{"level":2,"title":"获取项目目录的方式","slug":"获取项目目录的方式","link":"#获取项目目录的方式","children":[]},{"level":2,"title":"properties或yaml配置文件加载优先级","slug":"properties或yaml配置文件加载优先级","link":"#properties或yaml配置文件加载优先级","children":[]},{"level":2,"title":"静态资源路径配置","slug":"静态资源路径配置","link":"#静态资源路径配置","children":[]},{"level":2,"title":"数据库及连接池配置","slug":"数据库及连接池配置","link":"#数据库及连接池配置","children":[]},{"level":2,"title":"log","slug":"log","link":"#log","children":[]}],"git":{"createdTime":1665368578000,"updatedTime":1697712724000,"contributors":[{"name":"wanhongji","email":"wherywan@163.com","commits":2}]},"readingTime":{"minutes":4.7,"words":1410},"filePathRelative":"note/web/config.md","localizedDate":"2022年10月10日","excerpt":"\\n<h2>获取项目目录的方式</h2>\\n<div class=\\"language-text line-numbers-mode\\" data-ext=\\"text\\" data-title=\\"text\\"><pre class=\\"shiki light-plus\\" style=\\"background-color:#FFFFFF;color:#000000\\" tabindex=\\"0\\"><code><span class=\\"line\\"><span>//获取项目路径</span></span>\\n<span class=\\"line\\"><span>System.getProperty(\\"user.dir\\")</span></span>\\n<span class=\\"line\\"><span>//获取Jar包路径</span></span>\\n<span class=\\"line\\"><span>String path4 = Main.class.getProtectionDomain().getCodeSource().getLocation().getFile();</span></span>\\n<span class=\\"line\\"><span>String path4_1 = Main.class.getProtectionDomain().getCodeSource().getLocation().getPath()</span></span>\\n<span class=\\"line\\"><span>//获取Jar包中指定资源的路径</span></span>\\n<span class=\\"line\\"><span>Main.class.getClassLoader().getResource(\\"hello.text\\").getFile();</span></span>\\n<span class=\\"line\\"><span></span></span></code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{y as comp,v as data};
